<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.2  (Unix)">
	<META NAME="CREATED" CONTENT="20110215;16363600">
	<META NAME="CHANGED" CONTENT="0;0">
	<STYLE TYPE="text/css">
	<!--
		@page { margin: 0.79in }
		P { margin-bottom: 0.08in }
		A:link { so-language: zxx }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=3 STYLE="font-size: 13pt">README</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><B>Alistair's
Open Image Analysis Repository</B></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><A HREF="http://alistairboettiger.info/">http://alistairboettiger.info</A>
</FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">This
repository contains my open source Matlab codes for processing and
analyzing molecular imaging data.  I work primarily with whole mount
blastoderm stage Drosophila embryos, though many of the scripts here
should work equally well on different types of data.</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">My
image processing toolbox is primarily organized through a series of
GUIs that perform specific functions.  These rely on a common set of
custom codes.  </FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=3><B>Graphical
User Interfaces:</B></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=3><U><B>Descriptions</B></U></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=3><B>im_quant_sna_v3.fig</B></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><B>Description:</B>
Begun on 09/25/08, this is the latest version of code to quantify the
width of the snail expression pattern of embryos in cc14.  </FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT FACE="Arial, sans-serif"><B>Algorithm:
</B></FONT><FONT FACE="Arial, sans-serif"> A multicolor image of a
Drosophila embryo stained for snail is thresholded, the intensity of
staining is measured in transects across the pattern, from which
width and sharpness measurements can be made.  The nuclei are then
segmented, neighbors identified, and the shortest path from one side
of the expression domain to the other (through neighboring nuclei) is
computed.  This data is exported in a target folder as:</FONT> </FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT COLOR="#000000">save([folder,</FONT><FONT COLOR="#a020f0">'/'</FONT><FONT COLOR="#000000">,savename,</FONT><FONT COLOR="#a020f0">'_data.mat'</FONT><FONT COLOR="#000000">],</FONT><FONT COLOR="#a020f0">'sna_grad'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'nuc_map'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'tops'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#0000ff">...</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000">     
</FONT><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT COLOR="#a020f0">'bots'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'norm_grads'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'nuc_tot'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'cnt_nuc'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'flp'</FONT><FONT COLOR="#000000">);
</FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">This
is respectively: the raw gradients spanning the expression region,
the nuclear map, the indices of nuclei along the top of the pattern,
indices along the bottom, length normalized gradients, total nuclei,
the counts of nuclei spanning the image, and any horizontal or
vertical flips.  </FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=3><B>im_singlemolecule.fig</B></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><B>Description:
</B>Begun 01/21/11.  This script counts the number of mRNA molecules
in every cell from 3D confocal stacks.  Default is Zeiss .lsm
formatted inputs.  </FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><B>Algorithm:
</B><SPAN STYLE="font-weight: normal">Step zero loads the data, step
1 assigns channels and max-projects the nuclear channel. Step 2
segments the nuclei, step 3 segments the cells (assigns all space to
nearest nuclei), step 4 counts all dots using
difference-of-Gaussians, watershedding, and size and min intensity
filters.  step 5 compares neighboring levels, removes any dot in
current level already found in previous.  step 6 repeats step 4 for
chn 2, step 7 repeats step 5 for channel 2, step 8 exports data. </SPAN></FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT COLOR="#000000"><SPAN STYLE="font-weight: normal">save([fout,fname],</SPAN></FONT><FONT COLOR="#0000ff"><SPAN STYLE="font-weight: normal">...</SPAN></FONT></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000">       
</FONT><FONT FACE="courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT COLOR="#a020f0">'mRNA_cnt1'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'mRNA_den1'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'mRNA_ind1'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'mRNA_sadj1'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'DotData1'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#0000ff">...</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000">       
</FONT><FONT FACE="courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT COLOR="#a020f0">'mRNA_cnt2'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'mRNA_den2'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'mRNA_ind2'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'mRNA_sadj2'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'DotData2'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#0000ff">...</FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0in"><FONT COLOR="#000000">       
</FONT><FONT FACE="courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><FONT COLOR="#a020f0">'NucLabeled'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'nuc_cents'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'nuc_area'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'In'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'conn_map'</FONT><FONT COLOR="#000000">,</FONT><FONT COLOR="#a020f0">'Cell_bnd'</FONT><FONT COLOR="#000000">);
</FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">This
is the raw counts, the densities, the cell size adjusted counts, and
the raw dot data centroids (before redundancy check).  Then the
labeled matrix for the nuclei, the centroids, area per cell, the
projected nuclear map, the connectivity map, and the cell boundary
map.  </SPAN></FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=3><B>imviewer_lsm.fig</B></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><B>Description:
</B>Begun 02/12/11.  This file reads lsm 5 format (.lsm) files from
Zeiss software and saves the data in the Z-stacks as independent .tif
files appended as <FONT FACE="Courier, monospace">_z#.tif </FONT>in a
target folder.  A max-project image is also saved.  An autocycle
function will loop through multiple positions from a multi-position
acquisition and automatically save all.  </FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><FONT COLOR="#000000"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><B>Algorithm:
</B><SPAN STYLE="font-weight: normal">Two simple steps, one to read
in the data, one to max project and write it out.  Max-project is
done sequentially to save memory and not need to load all layers into
memory simultaneously.  </SPAN></FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0in"><BR>
</P>
<P STYLE="margin-bottom: 0in"><FONT FACE="Arial, sans-serif"><FONT SIZE=3><U><B>Installation:</B></U></FONT></FONT></P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">In
addition to simply copying the files to a common directory and firing
them up from Matlab, there are a few quick setup steps you may need
to follow:</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><BR>
</P>
<UL>
	<LI><P STYLE="margin-bottom: 0in; font-weight: normal"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">If
	you are running on a Windows, the file separator will need to be
	changed to backslash '\' instead of forwardslash '/'.  A find all
	change all should suffice.  </FONT></FONT>
	</P>
	<LI><P STYLE="margin-bottom: 0in"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">If
	you haven't copied the .mat files  called _pars#.mat for the
	respective GUI, find the files called </SPAN></FONT></FONT><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">_pars#.mat
	</SPAN></FONT></FONT><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">(where
	# is the step number of the analysis script).  Execute the commented
	out</SPAN></FONT></FONT><FONT FACE="Courier, monospace"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">
	pars = {...} save pars </SPAN></FONT></FONT><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><SPAN STYLE="font-weight: normal">command.
	 *Why it's written this way. </SPAN></FONT></FONT>
	</P>
</UL>
<P STYLE="margin-bottom: 0in; font-weight: normal"><BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt">*All
these GUIs write and read the current set of parameters from a .mat
file on the hard-drive.  This allows you to find an optimal parameter
set for processing your data and have that easily become the program
default.</FONT></FONT></P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><BR>
</P>
<P STYLE="margin-bottom: 0in; font-weight: normal"><BR>
</P>
</BODY>
</HTML>